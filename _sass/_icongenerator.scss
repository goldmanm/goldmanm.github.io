

// sass rgba returns hex colors sometimes, need to use a custom function
@function safe-rgba($color, $alpha: 1.0) {
    @return unquote("rgba(#{red($color)},#{green($color)},#{blue($color)},#{$alpha})");
}


// Icon Generator
// modified from: http://codepen.io/noahblon/blog/coloring-svgs-in-css-background-images
@function _buildIcon($icon, $icon-data) {
  // $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2224%22%20height%3D%2224%22%3E#{$icon}%3C%2Fsvg%3E';
  // $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%3E#{$icon}%3C%2Fsvg%3E';
  $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20#{$icon-data}%3E#{$icon}%3C%2Fsvg%3E';
  @return $icon;
}

@function _buildPath($parameters, $path) {
  $icon: '%3Cpath%20fill%3D%22#{map-get($parameters, color)}%22%20stroke%3D%22#{map-get($parameters, stroke-color)}%22%20stroke-width%3D%22#{map-get($parameters, stroke-width)}%22%20style%3D%22#{map-get($parameters, css)}%22%20d%3D%22#{$path}%22%20%2F%3E';
  @return $icon;
}

@function icon(
  $icon-name,
  $color, 
  $icon-data: 'viewBox="0 0 512 512"',
  $stroke-color: transparent,
  $stroke-width: 0,
  $css: '' // arbitrary css
  ){
    $parameters: (
		'color': safe-rgba( $color, opacity($color) ),
		'stroke-color': $stroke-color,
		'stroke-width': $stroke-width,
		'css': $css
    );
    
    $icons: (
    	heart:      _buildPath($parameters, 'M12 21.35l-1.45-1.32c-5.15-4.67-8.55-7.75-8.55-11.53 0-3.08 2.42-5.5 5.5-5.5 1.74 0 3.41.81 4.5 2.09 1.09-1.28 2.76-2.09 4.5-2.09 3.08 0 5.5 2.42 5.5 5.5 0 3.78-3.4 6.86-8.55 11.54l-1.45 1.31z'),
    	star:       _buildPath($parameters, 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'),
    	mail:       _buildPath($parameters, 'M256 273.4l-205.2-170h411L256 273.4zm0 55.5L50 158v250.4h412v-250L256 329z'),
      twitter:    _buildPath($parameters, 'M462 128.2c-15.2 6.7-31.4 11.3-48.5 13.3 17.4-10.4 30.8-27 37-46.7-16.2 9.7-34.3 16.7-53.6 20.5C381.4 99 359.5 88.6 335 88.6c-54.5 0-94.6 51-82.3 103.8-70.3-3.5-132.6-37.2-174.3-88.3-22.2 38-11.5 87.8 26 113-13.7-.5-26.8-4.3-38-10.7-1 39.2 27 75.8 67.7 84-12 3.2-25 4-38.2 1.4 10.7 33.6 42 58 79 58.7-35.6 28-80.4 40.3-125.2 35 37.4 24 81.8 38 129.6 38 157 0 245.6-132.5 240.2-251.4 16.5-12 31-26.8 42.2-43.8z'),
      github:		_buildPath($parameters, 'm 256.23307,11.98033 c -137.12,0 -248.3199976,111.168 -248.3199976,248.352 0,109.696 71.1359996,202.784 169.8239976,235.616 12.416,2.272 16.96,-5.376 16.96,-11.968 0,-5.888 -0.224,-21.504 -0.32,-42.24 -69.088,15.008 -83.648,-33.28 -83.648,-33.28 -11.295998,-28.672 -27.583998,-36.32 -27.583998,-36.32 -22.56,-15.392 1.696,-15.104 1.696,-15.104 24.927998,1.76 38.047998,25.6 38.047998,25.6 22.144,37.952 58.112,26.976 72.256,20.64 2.272,-16.064 8.672,-26.976 15.776,-33.184 -55.136,-6.304 -113.087998,-27.584 -113.087998,-122.752 0,-27.104 9.663998,-49.28 25.567998,-66.624 -2.56,-6.304 -11.104,-31.552 2.432,-65.728 0,0 20.864,-6.688 68.288,25.472 19.808,-5.536 41.024,-8.288 62.144,-8.384 21.088,0.096 42.336,2.848 62.176,8.352 47.424,-32.128 68.224,-25.472 68.224,-25.472 13.536,34.176 5.024,59.424 2.464,65.728 15.904,17.344 25.536,39.52 25.536,66.624 0,95.392 -58.048,116.384 -113.376,122.528 8.928,7.68 16.864,22.816 16.864,45.984 0,33.184 -0.32,59.968 -0.32,68.128 0,6.656 4.48,14.368 17.088,11.936 98.592,-32.896 169.664,-125.92 169.664,-235.584 0,-137.12 -111.2,-248.32 -248.352,-248.32 z'),
      linkedin:   _buildPath($parameters, 'M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z'),
      resume:     _buildPath($parameters, 'M423.3 150.8H322.8V50.3l100.5 100.5zm-135.5 35V50H88.3v412h335.4V185.8h-136z'),
      blog:       _buildPath($parameters, 'M50 65v293.7h64.5V447l132-88.3H462V65H50zm206 218.6H121.8v-30H256v30zm135.8-60h-270v-30h270v30zm0-60h-270v-30h270v30z'),
      about:      _buildPath($parameters, 'M256 50C142.2 50 50 142.2 50 256s92.2 206 206 206 206-92.2 206-206S369.8 50 256 50zm5 72.8c18.5 0 33.5 15 33.5 33.5 0 18.4-15 33.4-33.4 33.4s-33.4-15-33.4-33.4c0-18.5 15-33.5 33.5-33.5zm59.6 252.7h-112V361l14-5.3c7.8-3 13-10.4 13-18.8v-79.3c0-8.3-5.2-15.8-13-18.7l-14-5.2v-15h84.8v118c0 8.5 5.3 16 13 19l14.2 5v14.7z'),
      tools:      _buildPath($parameters, 'M320.3 364.6c-8-8-19-12.3-30.5-11.6-18.8 1-38-5.7-52.4-20-19.2-19.2-24.6-47-16.3-71l43.8 43.6c17 1 43.3-25.3 42.3-42.3l-43.5-43.7c24-8.3 51.8-3 71 16.3 14.3 14.3 21 33.5 20 52.3-.7 11.4 3.6 22.5 11.6 30.5l96 96V138.2H225c-12.7 0-25-5-34-14l-32.7-32.6H50v328.6h326l-55.7-55.7z'),
      beaker:     _buildPath($parameters, 'm 253.38337,146.8 c 0,13.56 -11.96,24.6 -26.78,24.6 -14.82,0 -26.52,-11.04 -26.52,-24.6 0,-13.56 11.7,-24.72 26.52,-24.72 14.82,0 26.78,11.04 26.78,24.72 z m 41.86,-117.84 c 0,11.16 -9.75,20.16 -21.84,20.16 -12.09,0 -21.84,-9 -21.84,-20.16 0,-11.16 9.62,-20.16 21.84,-20.16 12.22,0 21.84,9 21.84,20.16 z m 10.4,113.76 c -20.54,0 -37.31,-15.6 -37.31,-34.56 0,-19.2 16.9,-34.8 37.44,-34.8 20.54,0 37.7,15.6 37.7,34.8 0,19.2 -16.9,34.56 -37.7,34.56 z m -99.71,-42.48 c -17.68,0 -31.98,-13.2 -31.98,-29.52 0,-16.32 14.43,-29.52 31.85,-29.52 17.42,0 31.98,13.2 31.98,29.52 0,16.32 -14.3,29.52 -31.85,29.52 z m 158.86,402.96 -217.62,0 c -29.51,0 -48.879995,-28.44 -36.14,-53.04 l 62.01,-118.8 c 17.16,-33.12 26,-69.36 26,-106.08 l 0,-23.52 38.09,0 c 0,24.96 3.12,70.44 -21.06,126.6 l 53.3,0 67.6,131.16 c 7.54,14.4 29.64,6.6 21.84,-8.16 -6.76,-13.2 -19.76,-38.64 -54.08,-104.76 -34.32,-66 -29.9,-120 -29.9,-144.84 l 38.09,0 0,23.52 c 0,36.72 9.1,72.96 26,106.08 l 62.14,118.8 c 12.74,24.6 -6.5,53.04 -36.14,53.04 z'),
      quote:      _buildPath($parameters, 'M84 324.6c-13.7-49.3 7.2-122 67-161.4-24.4 32-29 68.8-27.8 89 13.8 1 78.8 6 78.4 63.3 0 65-97 82.7-117.5 9zm147.6-9c0-44.7-32.7-81.7-75.5-88.5 4-34.3 29-67 67-81.3l-16.8-36.5c-124 24.5-173.2 144-151 223.4 30.3 106 176.4 85.3 176.4-17zm83 9c-14-49.3 7-122 66.8-161.4-24.4 32-29 68.8-27.8 89 13.8 1 78.8 6 78.4 63.3 0 65-97 82.7-117.5 9zm147.4-9c0-44.7-32.7-81.7-75.5-88.5 3.8-34.3 29-67 67-81.3l-17-36.5c-124 24.5-173 144-151 223.4C316 438.6 462 418 462 315.6z'),
      light:      _buildPath($parameters, 'm 308.77004,477.35627 c 2.25,0 4.14,0.9 5.85,2.43 1.71,1.53 2.43,3.6 2.43,5.85 l 0,18.72 c 0,2.52 -0.9,4.68 -2.43,6.3 -1.53,1.62 -3.6,2.52 -5.85,2.52 l -107.37,0 c -5.85,0 -8.82,-2.88 -8.82,-8.73 l 0,-18.72 c 0,-2.25 0.72,-4.14 2.43,-5.85 1.71,-1.71 3.6,-2.43 6.3,-2.43 l 107.46,0 z m 0,-53.46 c 2.25,0 4.14,0.72 5.85,2.43 1.71,1.71 2.43,3.78 2.43,6.3 l 0,18.72 c 0,2.25 -0.9,4.14 -2.43,5.85 -1.53,1.71 -3.6,2.43 -5.85,2.43 l -107.37,0 c -2.7,0 -4.68,-0.9 -6.3,-2.43 -1.62,-1.53 -2.52,-3.6 -2.52,-5.85 l 0,-18.72 c 0,-5.85 2.88,-8.82 8.73,-8.82 l 107.46,0 z m 110.7,-170.91 c -5.13,-0.72 -9.54,0 -13.14,2.52 -3.6,2.34 -5.94,5.58 -6.66,9.63 -0.72,4.05 0.27,7.83 3.06,11.52 2.7,3.6 6.66,5.94 11.7,6.66 l 45.9,7.02 c 5.04,0.72 9.45,0 13.14,-2.43 3.6,-2.34 5.85,-5.76 6.66,-10.08 0.72,-4.05 -0.36,-7.83 -3.33,-11.34 -2.97,-3.6 -6.84,-5.58 -11.7,-6.3 l -45.63,-7.2 z m -4.95,-104.13 c -4.5,1.8 -7.56,4.77 -9.63,8.82 -1.98,4.05 -2.07,8.1 -0.27,12.15 1.8,4.05 4.86,6.66 9,8.1 4.32,1.17 8.64,0.9 13.05,-0.9 l 42.3,-19.35 c 4.86,-1.8 8.1,-4.77 9.9,-8.82 1.98,-3.96 1.98,-8.1 0,-12.06 -1.8,-3.96 -4.77,-6.66 -9,-7.92 -4.14,-1.26 -8.46,-0.9 -12.87,1.35 l -42.48,18.72 z m -71.55,-70.289999 c -2.97,4.05 -4.05,8.37 -3.33,12.96 0.72,4.5 2.97,8.1 6.66,10.169999 3.6,2.16 7.56,2.7 11.7,1.26 4.32,-1.26 7.92,-3.869999 10.8,-7.919999 l 25.47,-39.15 c 2.52,-3.96 3.6,-8.1 2.97,-12.6 -0.63,-4.5 -2.7,-7.83 -6.3,-10.44 -3.78,-2.16 -7.65,-2.7 -11.88,-1.35 -4.14,1.17 -7.74,3.87 -10.8,7.92 l -25.2,39.06 z M 90.700041,253.16627 c 4.77,-0.72 9,0 12.959999,2.52 3.87,2.34 6.3,5.58 6.93,9.63 0.72,4.05 -0.36,7.83 -3.33,11.52 -2.88,3.6 -6.93,5.94 -12.059999,6.66 l -45.72,7.02 c -4.77,0.72 -9,0 -12.96,-2.43 -3.87,-2.34 -6.12,-5.76 -6.84,-10.08 -0.9,-4.05 0.36,-7.83 3.24,-11.34 2.97,-3.6 7.02,-5.58 12.15,-6.3 l 45.63,-7.2 z m 4.95,-104.13 c 4.499999,1.8 7.649999,4.77 9.629999,8.82 1.8,4.05 1.98,8.1 0.18,12.15 -1.8,4.05 -4.95,6.66 -9.359999,8.1 -4.5,1.17 -8.82,0.9 -13.23,-0.9 l -42.3,-19.35 c -4.5,-1.8 -7.65,-4.77 -9.63,-8.82 -2.07,-3.96 -2.16,-8.1 -0.27,-12.06 1.8,-3.96 4.86,-6.66 9,-7.92 4.32,-1.26 8.82,-0.9 13.5,1.35 l 42.48,18.72 z M 166.75004,78.566271 c 2.88,4.05 3.96,8.37 3.24,12.96 -0.72,4.59 -2.97,8.1 -6.57,10.169999 -3.33,2.16 -7.2,2.7 -11.7,1.26 -4.32,-1.26 -7.83,-3.869999 -10.35,-7.919999 l -25.38,-39.15 c -2.88,-3.96 -4.05,-8.1 -3.24,-12.6 0.81,-4.5 2.88,-7.83 6.57,-10.44 3.33,-2.16 7.2,-2.7 11.7,-1.35 4.32,1.17 7.74,3.87 10.35,7.92 l 25.2,39.06 z m 104.04,-14.4 c 0,5.22 -1.44,9.45 -4.5,12.78 -2.88,3.24 -6.48,4.95 -10.8,4.95 -4.14,0 -7.65,-1.8 -10.62,-5.04 -2.88,-3.33 -4.5,-7.56 -4.5,-12.6 l 0,-46.35 c 0,-5.22 1.62,-9.4500001 4.5,-12.7800001 2.97,-3.33 6.48,-4.94999995 10.53,-4.94999995 4.5,0 8.1,1.61999995 10.98,4.94999995 2.88,3.33 4.32,7.5600001 4.32,12.6000001 l 0,46.35 z m 106.83,148.319999 c 0,0.63 0,1.17 -0.27,1.62 -0.18,0.36 -0.27,0.9 -0.27,1.62 l 0,1.62 c 0,6.66 -0.9,13.95 -2.7,22.05 -2.7,13.86 -7.56,28.26 -14.76,43.2 l -23.4,47.7 c -5.4,10.8 -9.36,20.88 -11.52,29.88 -2.16,9 -3.96,16.83 -5.22,23.4 -1.35,6.66 -2.7,11.88 -4.14,15.75 -1.53,3.87 -4.23,6.12 -8.28,6.84 l -104.49,0 c -4.14,-0.72 -6.84,-2.97 -8.37,-6.84 -1.44,-3.87 -2.7,-9 -4.14,-15.66 -1.17,-6.66 -2.88,-14.4 -5.13,-23.4 -2.16,-9 -6.03,-19.08 -11.52,-30.06 l -23.4,-47.7 c -7.2,-14.94 -12.06,-29.34 -14.58,-43.2 -0.9,-3.78 -1.35,-7.47 -1.8,-11.07 l -0.9,-11.07 0,-4.68 c 0,-17.73 2.97,-33.12 9,-46.35 6.03,-13.23 14.4,-24.3 25.2,-33.57 10.98,-9.18 23.85,-16.2 38.7,-20.7 14.85,-4.5 31.14,-6.84 48.6,-6.84 l 1.35,0 c 17.64,0 33.84,2.25 48.6,6.84 14.76,4.59 27.9,11.52 38.7,20.7 10.8,9.18 19.35,20.34 25.56,33.57 6.3,13.23 9.45,28.62 9.45,46.26 z'),
      work:       _buildPath($parameters, 'M416 249l-24.7 173H119.8l-24-173h320zm46-40H50l35 253h341l36-253zm-338-30l-4.2-20H392l-4 20h40.4l10-57H73.6l10 57h40.3zm20.7-84L142 82H370l-2.6 13h35.4l7.8-45H101.6l7.6 45h35.5z'),
      runner:     _buildPath($parameters, 'm 446.25153,199.34923 c -3.395,-6.965 -9.8,-12.635 -17.185,-15.085 -3.885,-1.295 -8.015,-1.68 -11.97,-0.805 -4.935,1.12 -12.495,4.97 -15.645,9.065 -4.76,6.195 -0.84,14.35 -4.445,20.755 -4.13,7.35 -12.25,8.995 -19.635,6.615 -10.675,-3.5 -23.59,-10.99 -29.575,-20.825 -5.355,-8.855 -11.585,-14.98 -5.915,-21.945 3.605,-4.41 19.95,-10.675 28.455,-28 17.43,-35.455 4.41,-71.889997 -23.485,-85.259997 -39.935,-19.11 -75.84501,1.085 -85.61001,26.88 -11.165,29.434997 1.085,39.234997 -6.44,52.219997 -2.38,4.13 -9.415,1.19 -14.28,0.35 -2.975,-0.525 -34.16,-12.705 -71.4,-4.725 -24.01,5.145 -45.885,18.655 -51.555,42.63 -2.03,8.54 -4.165,18.515 -0.7,26.985 5.075,12.46 19.32,18.935 31.85,13.79 9.45,-3.885 13.86,-9.765 14.84,-18.83 0.63,-5.915 -1.015,-11.165 1.855,-13.72 7.07,-6.3 26.005,-3.71 37.03,-0.525 9.59,2.765 11.69,15.645 8.435,26.775 -3.185,10.92 -9.345,20.72 -15.645,30.1 -6.265,9.24 -12.32,18.69 -19.04,27.615 -9.485,12.6 -26.495,35.77 -45.08,27.545 -3.815,-1.715 -7.945,-4.83 -10.92,-7.77 -2.87,-2.905 -4.305,-6.93 -7.455,-9.59 -3.64,-3.08 -8.505,-5.215 -13.369997,-4.55 -10.394995,1.365 -19.704995,5.775 -27.299995,13.58 -7.875,8.12 -12.495,19.32 -9.66,30.45 1.225,4.865 4.095,8.995 8.855,10.815 5.005,1.89 11.41,1.505 16.52,0.14 4.409995,-1.155 8.119995,-2.555 12.529992,-0.14 4.48,2.45 7.7,6.72 11.935,9.555 8.54,5.705 18.375,10.5 28.665,11.76 18.2,2.17 35.21,-6.895 50.505,-15.575 7,-3.99 17.92,-9.45 25.48,-3.185 4.725,3.885 5.46,11.165 5.845,16.765 1.54,22.47 3.745,47.635 8.54,69.685 2.31,10.605 9.135,21.28 19.705,24.92 10.08,3.465 25.55,4.445 35.525,0.35 10.36001,-4.27 19.98501,-12.285 16.31001,-24.57 -2.24,-7.49 -7.175,-12.215 -14.14001,-15.68 -3.92,-1.96 -5.32,-3.395 -6.475,-7.7 -1.785,-6.825 -1.82,-14.56 -2.38,-21.595 -0.735,-8.54 -0.56,-17.115 -0.56,-25.69 0,-6.965 0.665,-14.035 1.4,-20.58 2.205,-20.055 10.71001,-38.01 21.17501,-54.985 3.885,-6.3 7.63,-12.6 12.18,-18.48 3.64,-4.69 8.435,-6.405 13.51,-6.335 6.93,0.07 14.42,3.5 20.23,7.14 15.05,9.45 34.475,9.8 52.045,4.2 21.035,-6.685 38.29,-22.645 46.13,-43.33 2.31,-5.95 3.185,-15.33 0.315,-21.21 z'),
      book:       _buildPath($parameters, 'M 294.78737,71.584871 C 257.45999,71.781183 217.79457,82.131399 189.0813,115.23645 132.15167,94.086604 67.261123,109.85487 20.827141,157.89086 9.0944765,175.55508 -1.3470055,202.85696 1.068617,225.75495 28.872995,287.8177 57.644204,349.3148 85.579696,411.15148 c 4.420147,25.40091 27.468704,36.48792 40.833874,17.64862 53.29408,-43.39511 116.37576,-63.04157 178.76539,-65.33219 31.85512,8.19323 54.81113,-28.36272 82.47186,-41.33096 34.73345,-19.46247 73.66745,-27.89316 111.13814,-21.34841 22.55278,-4.66405 13.65241,-40.7808 14.09032,-60.94768 C 518.75089,224.49001 500.7642,221.77944 494.83887,212.5979 445.34916,168.7434 395.93516,124.63798 345.80633,82.077556 330.00452,71.378023 311.84026,74.295835 294.78737,71.584871 Z M 24.869398,187.51026 c 27.685069,57.77873 53.475339,117.12201 82.842772,173.5139 -6.99328,11.32947 -4.66112,53.37171 -15.243163,22.81468 C 67.141534,328.89563 41.943623,273.85037 17.003186,218.60698 18.886092,207.96786 21.09065,197.3083 24.869398,187.51026 Z m 430.968742,54.2627 c 13.98536,3.35232 44.01078,-9.99254 41.22598,17.91349 2.66965,14.19712 1.32747,23.78925 -9.8945,17.63991 -52.69363,-3.89302 -105.37994,17.20852 -148.84811,55.7411 -15.35124,15.78783 -34.33752,6.61734 -51.85983,10.03965 -60.36144,5.40326 -120.67134,27.23231 -171.82962,70.12962 2.75048,-18.87969 2.49726,-44.09246 17.05789,-54.42444 58.68857,-50.99399 132.05078,-55.14535 200.33767,-52.12369 10.72102,-7.9091 23.78006,-26.02912 37.33778,-33.76325 26.3113,-19.44934 56.31475,-29.66154 86.47274,-31.15239 z'),
    );

    $icon: _buildIcon(map-get($icons, $icon-name), $icon-data);
    @return url("data:image/svg+xml;charset=utf8,#{$icon}");
  }
