
$(document).ready(function() {

  // $('.flexslider').flexslider({
  //   animation: "slide",
  //   slideshow: false,
  //   itemWidth: 2000
  // });

  // Initiate Skrollr for parallax scrolling
  // skrollr.init({forceHeight: false});

  // // set background images for posts with bg-images on homepage
  // $('.post--container').each(function(){
  //   var bg = $(this).data("bg");
  //   if(typeof $(this).data("bg") != 'undefined') {
  //     $(this).css('background-image', 'url(' + bg + ')');
  //   } 
  // });


  // 
  // Opens links (in posts and articles) in a new tab
  // 
  $('.article a[href]').click(function(e) {
    var url = $(this).attr('href');

    // only do this if not an anchor link
    if (url.indexOf('#') == -1 ) {
      e.preventDefault();
      window.open($(this).attr('href'));
    }
  });

  // 
  // generates random quotes for About page
  // 
  quotes = [
              'stay a while, and listen', 
              'stay a while, and listen', 
              'stay a while, and listen', 
              'stay a while, and listen', 
              '"To listen is to lean in, softly, with a willingness to be changed by what we hear." - unknown',
              'welcome to a brand new day!', 
              'I like turtles!',
              'would you like a cup of tea?',
              "let's go ride bikes!",
              "let's make things happen!",
              "there's more than one way to skin a website!",
              'it is easy to complain, but difficult to improve!',
              "#yolo. seize the day. make your life extraordinary!",
              "let's design something fun & messy!",
              "let's design something clean & elegant!",
            ];

  rand = Math.floor(Math.random()*(quotes.length));
  $('.about-quote').text(quotes[rand]);


  // Math.floor((Math.random()*10));

  // ************************************************************
  // Smooth Scrolling 
  // - can link to a # of another page, and smooth-scroll down to that #

    var scrollElement = 'html, body';
    
    // Smooth scrolling for internal links
    $("a[href^='#']").click(function(event) {
      event.preventDefault();
      
      var $this = $(this),
      target = this.hash,
      $target = $(target);
      
      $(scrollElement).stop().animate({
        'scrollTop': $target.offset().top
      }, 500, 'swing', function() {
        window.location.hash = target;
      });

    });



// ************************************************************
// Button show / hide functionality
// ************************************************************

   $(".expandablejs--preview").bind('mouseup',function(e) {
      // console.log("btn-show-hide--content btn-show-hide clicked"); 
      $(this).parent().find('.expandablejs--full').slideToggle(300);
      $(this).parent().find('.expandablejs--btn-open, .expandablejs--btn-close').toggle();
   });

}); // end .ready



// 
// Sticky Elements
// Elements stick to the top of the window but doesn't leave the container that it sits inside
// 

// $('.sticky-item').waypoint('sticky', {
//   direction: 'down',
//   stuckClass: 'stuck',
//   wrapper: '<div class="sticky-wrapper" />'
// });

$( ".sticky-item" ).each(function( index ) {
  console.log( index + ": " + $( this ).text() );

  var bottom = $(this).outerHeight() - $(this).parent().outerHeight();
  console.log('bottt: ' + bottom)
  $(this).waypoint(function(dir) {

    if (dir == 'down') {
      console.log('DOWN')

    }
  }, { offset: 0 });


  // Going UP
  // the bottom offset will be like:
  // https://github.com/imakewebthings/jquery-waypoints/issues/133


  $(this).waypoint(function(dir) {

    if ( dir == 'up') {
      console.log('UP')
    }
  }, { offset: bottom });

});


// $('.sticky-item')each.waypoint(function(dir) {
//     state_container_top($(this), dir); 
//   }, { offset: offset_start });


