

// sass rgba returns hex colors sometimes, need to use a custom function
@function safe-rgba($color, $alpha: 1.0) {
    @return unquote("rgba(#{red($color)},#{green($color)},#{blue($color)},#{$alpha})");
}


// Icon Generator
// modified from: http://codepen.io/noahblon/blog/coloring-svgs-in-css-background-images
@function _buildIcon($icon, $icon-data) {
  // $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2224%22%20height%3D%2224%22%3E#{$icon}%3C%2Fsvg%3E';
  // $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%3E#{$icon}%3C%2Fsvg%3E';
  $icon: '%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20#{$icon-data}%3E#{$icon}%3C%2Fsvg%3E';
  @return $icon;
}

@function _buildPath($parameters, $path) {
  $icon: '%3Cpath%20fill%3D%22#{map-get($parameters, color)}%22%20stroke%3D%22#{map-get($parameters, stroke-color)}%22%20stroke-width%3D%22#{map-get($parameters, stroke-width)}%22%20style%3D%22#{map-get($parameters, css)}%22%20d%3D%22#{$path}%22%20%2F%3E';
  @return $icon;
}

@function icon(
  $icon-name,
  $color, 
  $icon-data: 'viewBox="0 0 512 512"',
  $stroke-color: transparent,
  $stroke-width: 0,
  $css: '' // arbitrary css
  ){
    $parameters: (
		'color': safe-rgba( $color, opacity($color) ),
		'stroke-color': $stroke-color,
		'stroke-width': $stroke-width,
		'css': $css
    );
    
    $icons: (
    	heart:      _buildPath($parameters, 'M12 21.35l-1.45-1.32c-5.15-4.67-8.55-7.75-8.55-11.53 0-3.08 2.42-5.5 5.5-5.5 1.74 0 3.41.81 4.5 2.09 1.09-1.28 2.76-2.09 4.5-2.09 3.08 0 5.5 2.42 5.5 5.5 0 3.78-3.4 6.86-8.55 11.54l-1.45 1.31z'),
    	star:       _buildPath($parameters, 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'),
    	mail:       _buildPath($parameters, 'M256 273.4l-205.2-170h411L256 273.4zm0 55.5L50 158v250.4h412v-250L256 329z'),
      twitter:    _buildPath($parameters, 'M462 128.2c-15.2 6.7-31.4 11.3-48.5 13.3 17.4-10.4 30.8-27 37-46.7-16.2 9.7-34.3 16.7-53.6 20.5C381.4 99 359.5 88.6 335 88.6c-54.5 0-94.6 51-82.3 103.8-70.3-3.5-132.6-37.2-174.3-88.3-22.2 38-11.5 87.8 26 113-13.7-.5-26.8-4.3-38-10.7-1 39.2 27 75.8 67.7 84-12 3.2-25 4-38.2 1.4 10.7 33.6 42 58 79 58.7-35.6 28-80.4 40.3-125.2 35 37.4 24 81.8 38 129.6 38 157 0 245.6-132.5 240.2-251.4 16.5-12 31-26.8 42.2-43.8z'),
      github:		_buildPath($parameters, 'm 256.23307,11.98033 c -137.12,0 -248.3199976,111.168 -248.3199976,248.352 0,109.696 71.1359996,202.784 169.8239976,235.616 12.416,2.272 16.96,-5.376 16.96,-11.968 0,-5.888 -0.224,-21.504 -0.32,-42.24 -69.088,15.008 -83.648,-33.28 -83.648,-33.28 -11.295998,-28.672 -27.583998,-36.32 -27.583998,-36.32 -22.56,-15.392 1.696,-15.104 1.696,-15.104 24.927998,1.76 38.047998,25.6 38.047998,25.6 22.144,37.952 58.112,26.976 72.256,20.64 2.272,-16.064 8.672,-26.976 15.776,-33.184 -55.136,-6.304 -113.087998,-27.584 -113.087998,-122.752 0,-27.104 9.663998,-49.28 25.567998,-66.624 -2.56,-6.304 -11.104,-31.552 2.432,-65.728 0,0 20.864,-6.688 68.288,25.472 19.808,-5.536 41.024,-8.288 62.144,-8.384 21.088,0.096 42.336,2.848 62.176,8.352 47.424,-32.128 68.224,-25.472 68.224,-25.472 13.536,34.176 5.024,59.424 2.464,65.728 15.904,17.344 25.536,39.52 25.536,66.624 0,95.392 -58.048,116.384 -113.376,122.528 8.928,7.68 16.864,22.816 16.864,45.984 0,33.184 -0.32,59.968 -0.32,68.128 0,6.656 4.48,14.368 17.088,11.936 98.592,-32.896 169.664,-125.92 169.664,-235.584 0,-137.12 -111.2,-248.32 -248.352,-248.32 z'),
      linkedin:   _buildPath($parameters, 'M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z'),
      resume:     _buildPath($parameters, 'M423.3 150.8H322.8V50.3l100.5 100.5zm-135.5 35V50H88.3v412h335.4V185.8h-136z'),
      blog:       _buildPath($parameters, 'M50 65v293.7h64.5V447l132-88.3H462V65H50zm206 218.6H121.8v-30H256v30zm135.8-60h-270v-30h270v30zm0-60h-270v-30h270v30z'),
      about:      _buildPath($parameters, 'M256 50C142.2 50 50 142.2 50 256s92.2 206 206 206 206-92.2 206-206S369.8 50 256 50zm5 72.8c18.5 0 33.5 15 33.5 33.5 0 18.4-15 33.4-33.4 33.4s-33.4-15-33.4-33.4c0-18.5 15-33.5 33.5-33.5zm59.6 252.7h-112V361l14-5.3c7.8-3 13-10.4 13-18.8v-79.3c0-8.3-5.2-15.8-13-18.7l-14-5.2v-15h84.8v118c0 8.5 5.3 16 13 19l14.2 5v14.7z'),
      tools:      _buildPath($parameters, 'M320.3 364.6c-8-8-19-12.3-30.5-11.6-18.8 1-38-5.7-52.4-20-19.2-19.2-24.6-47-16.3-71l43.8 43.6c17 1 43.3-25.3 42.3-42.3l-43.5-43.7c24-8.3 51.8-3 71 16.3 14.3 14.3 21 33.5 20 52.3-.7 11.4 3.6 22.5 11.6 30.5l96 96V138.2H225c-12.7 0-25-5-34-14l-32.7-32.6H50v328.6h326l-55.7-55.7z'),
      lab:        _buildPath($parameters, 'M254 165c0 11.3-9.2 20.5-20.6 20.5S213 176.3 213 165s9-20.6 20.4-20.6S254 153.6 254 165zm32.2-98.2c0 9.3-7.5 16.8-16.8 16.8s-16.8-7.5-16.8-16.8S260 50 269.4 50s16.8 7.5 16.8 16.8zm8 94.8c-15.8 0-28.7-13-28.7-28.8 0-16 13-29 28.8-29s29 13 29 29-13 28.8-29 28.8zm-76.7-35.4c-13.6 0-24.6-11-24.6-24.6S204 77 217.4 77 242 88 242 101.6s-11 24.6-24.5 24.6zM339.7 462H172.3c-22.7 0-37.6-23.7-27.8-44.2l47.7-99c13.2-27.6 20-57.8 20-88.4v-19.6h29.3c0 20.8 2.4 58.7-16.2 105.5h41l52 109.3c5.8 12 22.8 5.5 16.8-6.8-5.2-11-15.2-32.2-41.6-87.3-26.4-55-23-100-23-120.7h29.3v19.6c0 30.6 7 60.8 20 88.4l47.8 99c9.8 20.5-5 44.2-27.8 44.2z'),
      rant:       _buildPath($parameters, 'M84 324.6c-13.7-49.3 7.2-122 67-161.4-24.4 32-29 68.8-27.8 89 13.8 1 78.8 6 78.4 63.3 0 65-97 82.7-117.5 9zm147.6-9c0-44.7-32.7-81.7-75.5-88.5 4-34.3 29-67 67-81.3l-16.8-36.5c-124 24.5-173.2 144-151 223.4 30.3 106 176.4 85.3 176.4-17zm83 9c-14-49.3 7-122 66.8-161.4-24.4 32-29 68.8-27.8 89 13.8 1 78.8 6 78.4 63.3 0 65-97 82.7-117.5 9zm147.4-9c0-44.7-32.7-81.7-75.5-88.5 3.8-34.3 29-67 67-81.3l-17-36.5c-124 24.5-173 144-151 223.4C316 438.6 462 418 462 315.6z'),
      idea:       _buildPath($parameters, 'M369 635.3c2.5 0 4.6 1 6.5 2.7s2.7 4 2.7 6.5v20.8c0 2.8-1 5.2-2.7 7s-4 2.8-6.5 2.8H249.7c-6.5 0-9.8-3.2-9.8-9.7v-20.8c0-2.5.8-4.6 2.7-6.5s4-2.7 7-2.7H369zm0-59.4c2.5 0 4.6.8 6.5 2.7s2.7 4.2 2.7 7v20.8c0 2.5-1 4.6-2.7 6.5s-4 2.7-6.5 2.7H249.7c-3 0-5.2-1-7-2.7s-2.8-4-2.8-6.5v-20.8c0-6.5 3.2-9.8 9.7-9.8H369zM492 386c-5.7-.8-10.6 0-14.6 2.8-4 2.6-6.6 6.2-7.4 10.7-.8 4.5.3 8.7 3.4 12.8 3 4 7.4 6.6 13 7.4l51 7.8c5.6.8 10.5 0 14.6-2.7 4-2.6 6.5-6.4 7.4-11.2.8-4.5-.4-8.7-3.7-12.6-3.3-4-7.6-6.2-13-7l-50.7-8zm-5.5-115.7c-5 2-8.4 5.3-10.7 9.8-2.2 4.5-2.3 9-.3 13.5 2 4.5 5.4 7.4 10 9 4.8 1.3 9.6 1 14.5-1l47-21.5c5.4-2 9-5.3 11-9.8 2.2-4.4 2.2-9 0-13.4-2-4.4-5.3-7.4-10-8.8-4.6-1.4-9.4-1-14.3 1.5l-47.2 20.8zM407 192.2c-3.3 4.5-4.5 9.3-3.7 14.4.8 5 3.3 9 7.4 11.3 4 2.4 8.4 3 13 1.4 4.8-1.4 8.8-4.3 12-8.8L464 167c2.8-4.4 4-9 3.3-14-.7-5-3-8.7-7-11.6-4.2-2.4-8.5-3-13.2-1.5-4.6 1.3-8.6 4.3-12 8.8l-28 43.4zm-280.3 194c5.3-.8 10 0 14.4 2.8 4.3 2.6 7 6.2 7.7 10.7.8 4.5-.4 8.7-3.7 12.8-3.2 4-7.7 6.6-13.4 7.4l-50.8 7.8c-5.3.8-10 0-14.4-2.7-4.3-2.6-6.8-6.4-7.6-11.2-1-4.5.4-8.7 3.6-12.6 3.3-4 7.8-6.2 13.5-7l50.7-8zm5.5-115.7c5 2 8.5 5.3 10.7 9.8 2 4.5 2.2 9 .2 13.5s-5.5 7.4-10.4 9c-5 1.3-9.8 1-14.7-1l-47-21.5c-5-2-8.5-5.3-10.7-9.8-2.3-4.4-2.4-9-.3-13.4 2-4.4 5.4-7.4 10-8.8 4.8-1.4 9.8-1 15 1.5l47.2 20.8zm79-78.3c3.2 4.5 4.4 9.3 3.6 14.4s-3.3 9-7.3 11.3c-3.7 2.4-8 3-13 1.4-4.8-1.4-8.7-4.3-11.5-8.8L154.8 167c-3.2-4.4-4.5-9-3.6-14s3.2-8.7 7.3-11.6c3.7-2.4 8-3 13-1.5 4.8 1.3 8.6 4.3 11.5 8.8l28 43.4zm115.6-16c0 5.8-1.6 10.5-5 14.2-3.2 3.6-7.2 5.5-12 5.5-4.6 0-8.5-2-11.8-5.6-3.2-3.7-5-8.4-5-14v-51.5c0-5.8 1.8-10.5 5-14.2 3.3-3.7 7.2-5.5 11.7-5.5 5 0 9 1.8 12.2 5.5 3.2 3.7 4.8 8.4 4.8 14v51.5zM445.5 341c0 .7 0 1.3-.3 1.8-.2.4-.3 1-.3 1.8v1.8c0 7.4-1 15.5-3 24.5-3 15.4-8.4 31.4-16.4 48l-26 53c-6 12-10.4 23.2-12.8 33.2s-4.4 18.7-5.8 26c-1.5 7.4-3 13.2-4.6 17.5-1.7 4.3-4.7 6.8-9.2 7.6H251c-4.6-.8-7.6-3.3-9.3-7.6-1.6-4.3-3-10-4.6-17.4-1.3-7.4-3.2-16-5.7-26-2.4-10-6.7-21.2-12.8-33.4l-26-53c-8-16.6-13.4-32.6-16.2-48-1-4.2-1.5-8.3-2-12.3l-1-12.3V341c0-19.7 3.3-36.8 10-51.5 6.7-14.7 16-27 28-37.3 12.2-10.2 26.5-18 43-23s34.6-7.6 54-7.6h1.5c19.6 0 37.6 2.5 54 7.6s31 12.8 43 23 21.5 22.6 28.4 37.3c7 14.7 10.5 31.8 10.5 51.4z'),
      work:       _buildPath($parameters, 'M416 249l-24.7 173H119.8l-24-173h320zm46-40H50l35 253h341l36-253zm-338-30l-4.2-20H392l-4 20h40.4l10-57H73.6l10 57h40.3zm20.7-84L142 82H370l-2.6 13h35.4l7.8-45H101.6l7.6 45h35.5z'),
      runner:     _buildPath($parameters, 'm 446.25153,199.34923 c -3.395,-6.965 -9.8,-12.635 -17.185,-15.085 -3.885,-1.295 -8.015,-1.68 -11.97,-0.805 -4.935,1.12 -12.495,4.97 -15.645,9.065 -4.76,6.195 -0.84,14.35 -4.445,20.755 -4.13,7.35 -12.25,8.995 -19.635,6.615 -10.675,-3.5 -23.59,-10.99 -29.575,-20.825 -5.355,-8.855 -11.585,-14.98 -5.915,-21.945 3.605,-4.41 19.95,-10.675 28.455,-28 17.43,-35.455 4.41,-71.889997 -23.485,-85.259997 -39.935,-19.11 -75.84501,1.085 -85.61001,26.88 -11.165,29.434997 1.085,39.234997 -6.44,52.219997 -2.38,4.13 -9.415,1.19 -14.28,0.35 -2.975,-0.525 -34.16,-12.705 -71.4,-4.725 -24.01,5.145 -45.885,18.655 -51.555,42.63 -2.03,8.54 -4.165,18.515 -0.7,26.985 5.075,12.46 19.32,18.935 31.85,13.79 9.45,-3.885 13.86,-9.765 14.84,-18.83 0.63,-5.915 -1.015,-11.165 1.855,-13.72 7.07,-6.3 26.005,-3.71 37.03,-0.525 9.59,2.765 11.69,15.645 8.435,26.775 -3.185,10.92 -9.345,20.72 -15.645,30.1 -6.265,9.24 -12.32,18.69 -19.04,27.615 -9.485,12.6 -26.495,35.77 -45.08,27.545 -3.815,-1.715 -7.945,-4.83 -10.92,-7.77 -2.87,-2.905 -4.305,-6.93 -7.455,-9.59 -3.64,-3.08 -8.505,-5.215 -13.369997,-4.55 -10.394995,1.365 -19.704995,5.775 -27.299995,13.58 -7.875,8.12 -12.495,19.32 -9.66,30.45 1.225,4.865 4.095,8.995 8.855,10.815 5.005,1.89 11.41,1.505 16.52,0.14 4.409995,-1.155 8.119995,-2.555 12.529992,-0.14 4.48,2.45 7.7,6.72 11.935,9.555 8.54,5.705 18.375,10.5 28.665,11.76 18.2,2.17 35.21,-6.895 50.505,-15.575 7,-3.99 17.92,-9.45 25.48,-3.185 4.725,3.885 5.46,11.165 5.845,16.765 1.54,22.47 3.745,47.635 8.54,69.685 2.31,10.605 9.135,21.28 19.705,24.92 10.08,3.465 25.55,4.445 35.525,0.35 10.36001,-4.27 19.98501,-12.285 16.31001,-24.57 -2.24,-7.49 -7.175,-12.215 -14.14001,-15.68 -3.92,-1.96 -5.32,-3.395 -6.475,-7.7 -1.785,-6.825 -1.82,-14.56 -2.38,-21.595 -0.735,-8.54 -0.56,-17.115 -0.56,-25.69 0,-6.965 0.665,-14.035 1.4,-20.58 2.205,-20.055 10.71001,-38.01 21.17501,-54.985 3.885,-6.3 7.63,-12.6 12.18,-18.48 3.64,-4.69 8.435,-6.405 13.51,-6.335 6.93,0.07 14.42,3.5 20.23,7.14 15.05,9.45 34.475,9.8 52.045,4.2 21.035,-6.685 38.29,-22.645 46.13,-43.33 2.31,-5.95 3.185,-15.33 0.315,-21.21 z'),
    );
      book:        _buildPath($parameters, 'm 288.77324,101.85613 -0.49372,0.003 c -29.33648,0.2638 -61.9957,8.37296 -85.56264,35.98869 -43.15601,-16.39143 -91.3516,-5.78354 -128.584856,26.75768 -17.081521,12.8467 -21.974619,38.03401 -25.25092,57.99873 l -0.555727,3.38447 1.328493,2.98464 c 20.798357,46.68915 41.826427,93.18881 62.94963,139.59743 l 0.41023,0.90044 0.55572,0.74615 c 1.8035,2.42389 4.94216,12.83958 9.16829,21.86837 2.11305,4.5144 4.84188,9.33576 9.65244,11.64887 4.81057,2.31312 10.57503,0.46799 15.37189,-4.02358 l -0.20034,0.17945 c 43.83427,-37.98265 97.07885,-55.44207 149.67141,-57.36906 9.35814,2.44699 17.97867,0.13299 25.36064,-4.08655 7.75908,-4.43508 14.48142,-10.61342 20.96015,-15.71022 l 0.031,-0.0251 0.0335,-0.0251 c 30.50043,-24.59642 66.58805,-35.9358 102.3322,-33.36298 6.16446,2.4374 12.12127,2.44222 16.36169,-2.40534 4.54163,-5.19186 5.03146,-12.21513 5.10409,-18.25092 0.0727,-6.03579 -0.5248,-12.13541 -0.88725,-17.62126 -0.36245,-5.48586 -0.37265,-10.39942 0.007,-12.53355 l 1.04943,-5.89055 L 463.81,229.175 C 420.56513,189.80575 376.90837,151.32857 333.34814,112.75569 l -0.13118,-0.11655 -0.13595,-0.11025 c -14.66154,-11.69767 -31.48338,-8.28894 -43.81883,-10.58157 z m 37.298,25.8101 c 36.37596,32.21069 72.71614,64.41714 108.8411,96.99094 -45.13741,-1.85919 -87.45126,15.0271 -123.50701,57.66818 l -1.47636,-2.03383 C 240.58877,191.42631 287.16965,96.21641 326.07124,127.66623 Z M 69.030327,197.43977 c 22.381536,47.28988 43.415903,96.32658 67.443123,143.06692 -3.28871,9.69732 -5.345,19.82848 -6.57568,29.97221 l -0.2886,-0.0161 c -1.41118,-3.77313 -3.20342,-7.62466 -5.54533,-11.14475 -20.62339,-45.31107 -41.137401,-90.69787 -61.437473,-136.23817 1.584253,-9.16071 3.49324,-18.05323 6.40396,-25.64009 z m 350.855953,44.74108 c 10.68203,-0.58614 21.67862,0.2528 32.88321,2.00235 0.0317,2.82505 0.19396,5.62238 0.37684,8.39033 0.3902,5.90568 0.88702,11.65625 0.83717,15.79837 -0.0498,4.14212 -0.89731,5.62274 -0.46509,5.12865 0.43222,-0.49411 0.0462,0.64647 -4.53405,-1.41676 l -0.86818,-0.39354 -0.91587,-0.0693 c -38.53844,-2.90917 -77.47415,9.22918 -110.56551,35.90683 -0.007,0.006 -0.0145,0.01 -0.0215,0.0161 -6.96036,5.4801 -13.28313,11.1457 -19.35737,14.61775 -6.09364,3.48312 -11.63507,4.94927 -18.33419,2.84925 l -0.85385,-0.26762 -0.87771,0.0314 c -53.95858,1.91308 -108.95181,19.60915 -155.08318,58.78268 1.13817,-13.98496 3.29787,-27.62011 7.69668,-39.06777 43.37497,-42.91625 100.77858,-50.77884 155.12849,-49.19597 l 16.23291,0.47225 -0.44362,-0.61078 c 29.54619,-34.76249 62.79469,-50.97831 99.16479,-52.97399 z'),
    $icon: _buildIcon(map-get($icons, $icon-name), $icon-data);
    @return url("data:image/svg+xml;charset=utf8,#{$icon}");
  }
