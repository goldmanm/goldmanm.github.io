




<!-- 

  container--shell
    container
    /
  /


 
 <head>
  <meta charset="utf-8">
  <meta name="description" content="Dickson Fong is a digital product designer for web, mobile, tablet, and television.">
 -->

<!doctype html>
<html lang="en" class="no-js">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Semi-Sticky Vertical Sidebar</title>
  <meta name="description" content="Jan Zheng designs and prototypes experiences.">
  <meta name="author" content="Jan Zheng">
  <meta name="keywords" content="user experience, ux, interaction design, digital, advertising, ui design, code, prototyping, resume ,portfolio">
  
  <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1" />

  <link href='http://fonts.googleapis.com/css?family=Josefin+Sans:100' rel='stylesheet' type='text/css'>
  <!-- <link href='http://fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic' rel='stylesheet' type='text/css'> -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600, 700' rel='stylesheet' type='text/css'>

<!-- 
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   -->
  <script src="/app/js/jquery.min.js"></script>

  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  <!-- import gets all the styles from main.scss in the _scss folder -->
  <link rel="stylesheet" href="/app/css/import.css">
<!-- 
  <link rel="stylesheet" href="/assets/stylesheets/compiled/flexslider.css">
  <link rel="stylesheet" href="/assets/stylesheets/compiled/slimbox2.css">
   -->
</head>

<body>  
  <div class="color-palette color-top" id="top">
    <div id="c1"></div><div id="c2"></div><div id="c3"></div><div id="c4"></div><div id="c5"></div>
    <div id="a1"></div><div id="a2"></div><div id="a3"></div><div id="a4"></div><div id="a5"></div>
  </div>




  <!-- Navigation -->
  <!-- Main navigation
        - stays to the left side >480. Static at the top <480. Mobile nav kicks in with a scroll top.
   -->
  <div class="nav">

    <!-- JZ logo -->
    <div class="nav--logo">
      <a class="nav--logo-link" href="/">

        <div class="nav--logo--content ">
          <span class="bracket"></span><span class="j">jan </span><span class="z">zheng</span><span class="bracket"></span>
        </div>
        <!-- 
        <div class="nav--logo--content show-nav-small ">
          <span class="bracket">{</span><span class="j">j</span><span class="z">z</span><span class="bracket">}</span>
        </div>
        <div class="nav--logo--content show-nav-full">
          <span class="bracket">{</span><span class="j">jan </span><span class="z">zheng</span><span class="bracket">}</span>
        </div> -->
      </a>

    </div>

    <!-- Main navigation buttons -->
    <div class="nav--menu">
      <div class="nav--menu--content">


      <!-- generate links and mark nav as active -->
       
              
        
        <a href="/">
          <div class="nav--menu-item nav--menu--home " >
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="speech-bubble-11-icon" d="M50,64.991v293.682h64.501v88.336l131.978-88.336H462V64.991H50z M256,283.567H121.841v-30H256
            V283.567z M391.841,223.567h-270v-30h270V223.567z M391.841,163.567h-270v-30h270V163.567z"></path> </svg>
            <div class="label"><span>rants</span></div>
          </div>
        </a>
        

        

        


       
              
        

        
        <a href="/about.html">
          <div class="nav--menu-item nav--menu--about " >
            
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> 

<path id="favorite-2-icon" d="M450.703,124.225C410.233,41.419,287.288,47.821,256,119.967
c-31.288-72.146-154.233-78.548-194.703,4.257C13.59,221.837,124.309,314.82,256,448.014
C387.691,314.82,498.41,221.837,450.703,124.225z"></path>
<!-- 
              <path id="about-icon" d="M377.055,170.75c0,66.275-53.726,120-120,120s-120-53.725-120-120c0-66.273,53.726-120,120-120
              S377.055,104.477,377.055,170.75z M356.101,296.41c-27.968,22.084-62.633,34.34-99.046,34.34c-36.835,0-71.839-12.543-99.934-35.051
              C83.067,322.875,50,417.877,50,461.25h412C462,418.25,428.678,323.926,356.101,296.41z"></path>
 -->
              <!-- crazy eye thing<path id="eye-icon" d="M291.75,256c0,18.641-15.11,33.75-33.75,33.75s-33.75-15.109-33.75-33.75c0-18.64,15.11-33.75,33.75-33.75
  S291.75,237.36,291.75,256z M462,248.666c0,0-73,121.668-205.75,121.668C133,370.334,50,248.666,50,248.666s76.333-107,206.25-107
  C388.334,141.666,462,248.666,462,248.666z M338,256c0-44.183-35.817-80-80-80s-80,35.817-80,80c0,44.184,35.817,80,80,80
  S338,300.184,338,256z"></path>-->

            </svg> 
            <div class="label"><span>about</span></div>
          </div>
        </a>
        

        


       
              
        

        

        
        <a href="/toolbox.html" >
          <div class="nav--menu-item nav--menu--toolbox " >
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="wrench-16-icon" d="M320.312,364.616c-8.046-8.046-19.162-12.297-30.523-11.663c-18.815,1.051-37.98-5.607-52.354-19.981
  c-19.2-19.2-24.636-46.944-16.321-70.99l43.654,43.654c17.032,1.003,43.364-25.329,42.362-42.359l-43.654-43.656
  c24.045-8.315,51.787-2.878,70.988,16.321c14.375,14.374,21.033,33.539,19.982,52.354c-0.635,11.371,3.61,22.471,11.663,30.523
  L462,414.71V138.265H225.087c-12.762,0-25.005-5.056-34.048-14.06L158.35,91.66H50v328.68h326.037L320.312,364.616z"></path> </svg>
            <div class="label"><span>tools</span></div>
          </div>
        </a>
        


      


      </div>
    </div>


    

    <!-- Social icons / contact (email, twitter, linkedin) -->
    <div class="nav--social-menu">

      <div class="nav--social-menu--content">

        <a href="mailto:hello@janzheng.com?Subject=Hello%20Jan!">
          <div class="nav--social-menu-item nav--social-menu--email ">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="email-3-icon" d="M256.017,273.436L50.847,103.407h410.904L256.017,273.436z M255.983,328.898L50,158.244v250.349h412
  V158.653L255.983,328.898z"></path> </svg>
            <div class="label"><span>hello@</span></div>
          </div>
        </a>

        <a href="https://twitter.com/janistanian">
          <div class="nav--social-menu-item nav--social-menu--twitter">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="twitter-icon" d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764
  c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787
  c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574
  c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699
  C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435
  C436.339,160.061,450.668,145.174,462,128.223z"></path> </svg>
            <div class="label"><span>chirp</span></div>
          </div>
        </a>


        <a href="http://www.linkedin.com/in/janzh">
          <div class="nav--social-menu-item nav--social-menu--linkedin">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="linkedin-icon" d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683
  C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z
  M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615
  c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915
  s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z"></path> </svg>
            <div class="label"><span>link</span></div>
          </div>
        </a>

        <a href="http://janzheng.com/resume.pdf">
          <div class="nav--social-menu-item nav--social-menu--resume">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <path id="download-2-icon" d="M333.816,231.323h66.258L255.998,375.645L111.926,231.323h66.256V50h155.635V231.323z
  M375.236,346.828V412H136.764v-65.172h-50V462h338.473V346.828H375.236z"></path> </svg>
            <div class="label"><span>cv</span></div>
          </div>
        </a>

      </div>
    </div>

  </div>
  <!-- End sidebar navigation -->


  <!-- This thing appears fixed on mobile view to let users scroll up to the menu. This is so fixed menu takes less space -->
  <a href="#top">
    <div class="nav-mobile-container">
      <div class="nav-mobile" data-0="display: none" data-100="display: block">
        <div class="svg-container icon-uptop ">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"> <polygon id="arrow-25-icon" points="142.332,104.886 197.48,50 402.5,256 197.48,462 142.332,407.113 292.727,256 "></polygon> </svg>
        </div>
      </div>
    </div>
  </a>



  <div class="clear"></div>



  <div class="container--shell" id="body--content">
    <div class="container">


      <!-- Main section for content -->
      <div class="main">
        <div class="content">
          <div class="container">
  <div class="article  post-std ">


    <!-- begin article head content (date, title, summary, tags) -->

    <div class="article--head container">


      <div class="article--head--intro">

        
        <div class="article--head--category article--head--category-lab">

          <div class="article--head--category--icon">

            
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"> <path id="flask-7-icon" d="M253.984,164.94c0,11.354-9.205,20.56-20.56,20.56s-20.559-9.205-20.559-20.56s9.204-20.559,20.559-20.559S253.984,153.586,253.984,164.94z M286.241,66.82c0,9.289-7.531,16.82-16.821,16.82s-16.821-7.531-16.821-16.82c0-9.291,7.531-16.82,16.821-16.82S286.241,57.529,286.241,66.82z M294.34,161.617c-15.916,0-28.865-12.948-28.865-28.864c0-15.917,12.949-28.865,28.865-28.865s28.865,12.948,28.865,28.865C323.205,148.669,310.256,161.617,294.34,161.617z M217.471,126.212c-13.567,0-24.606-11.04-24.606-24.608s11.039-24.607,24.606-24.607c13.569,0,24.608,11.039,24.608,24.607S231.041,126.212,217.471,126.212z M339.707,462H172.293c-22.671,0-37.592-23.729-27.767-44.16l47.632-99.066c13.254-27.564,20.136-57.76,20.136-88.346v-19.641h29.174c0,20.844,2.479,58.704-16.161,105.529h40.978l52.064,109.282c5.748,12.02,22.731,5.53,16.778-6.839c-5.347-11.105-15.295-32.198-41.766-87.253c-26.389-54.882-22.874-99.906-22.874-120.72h29.217v19.641c0,30.586,6.882,60.781,20.136,88.347l47.633,99.064C377.298,438.271,362.379,462,339.707,462z"></path> </svg>
            

            

            
          </div>
        </div>
        

        <div class="article--head--date-container">
          <div class="article--head--date">March 20, 2014</div>    
        </div> 

      </div>

      <!-- this is for category tags labels -->
      

      <div class="article--head--title-container">
        <div class="article--head--title">Semi-Sticky Vertical Sidebar</div>
      </div> 

      <div class="article--head--subtitle-container">
        <div class="article--head--subtitle">for pages with really, really long sidebars</div>
      </div> 


      <div class="article--head--tags-container">
        <div class="article--tags">
          
             
              
              <ul class="article--tags--list">

                
                   
                    <li>prototype</li>
                   
                    <li>design</li>
                   
                    <li>ux</li>
                  
                
                
              
              
            </ul>
          
        </div>
      </div> 

      




    </div>
    <!-- end article head content -->

    <!-- begin article content -->

    <div class="article--body container">

      <!-- 
      <div class="article--summary-container">
        <div class="article--summary">for pages with really, really long sidebars</div>
      </div>  -->



      <div class="article--body--video-container">
        <div class="article--body--video">
          
              
        </div>
      </div>

      <div class="article--body--title-image-container">
           
      </div>


      <div class="article--body--content">
        
<!-- <link rel="stylesheet" href="/app/posts/lab/left-nav/left-nav.css"> -->

<style type="text/css">

  .sticky-sidebar-toggle {
    width: 40px;
    font-size: 13px; 
    text-align: center;
    background-color: rgba(82, 185, 62, 0.25);
  }
  .sticky-sidebar-toggle:hover {
    background-color: rgba(82, 185, 62, 0.65);
    cursor: pointer;
  }

  .sticky-sidebar-container {
    width: 40px;
    right: 70px;
    position: absolute;
  }

  .sticky-sidebar-container li{
    width: 40px;
    padding: 60px 0;
    text-align: center;
    list-style-type: none;
  }

    .post--left-nav-taller {
      padding: 20px 0 !important;
    }

  .sticky-sidebar-container ul{
    padding-bottom: 0px !important ;
  }
  .sticky-sidebar-container li:nth-child(1){
    background-color: rgba(42, 112, 125, 0.05);
  }
  .sticky-sidebar-container li:nth-child(2){
    background-color: rgba(42, 112, 125, 0.1);
  }

  .sticky-sidebar-container li:nth-child(3){
    background-color: rgba(42, 112, 125, 0.15);
  }

  .sticky-sidebar-container li:nth-child(4){
    background-color: rgba(42, 112, 125, 0.2);
  }

  .sticky-sidebar-container li:nth-child(5){
    background-color: rgba(42, 112, 125, 0.25);
  }

  .sticky-sidebar-container li:nth-child(6){
    background-color: rgba(42, 112, 125, 0.3);
  }

</style>


<script src="/app/posts/lab/left-nav/waypoints.min.js"></script>
<script src="/app/posts/lab/left-nav/jquery.ba-throttle-debounce.min.js"></script>


<script>

$(document).ready(function() {

  // click this button to toggle the menu size
  $('.sticky-sidebar-toggle').click( 
    function() { 
      $('.sticky-sidebar-container li').toggleClass("post--left-nav-taller")
      refresh();
    } 
  )

  // 
  // de-duplication code
  // 

  // Resize + Scroll debouncer from: http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
  $(window).resize( $.throttle( 130, window_resize ) );   // Bind the throttled handler to the resize event.
  $(window).scroll( $.throttle( 80, scroll ) );           // Bind the throttled handler to the scroll event.



  // 
  // ELEMENTS
  // 

  // the navigation container that aligns the menu horizontally, and determines the start position.
  // this element floats, so we don't always know its true size.
  var nav_container = $('.sticky-sidebar-nav');

  // the navigation menu element. 
  // this element floats, so we don't always know its true size.
  var nav_element = $(nav_container).children('nav');

  // the actual items in the navigation. 
  var nav_items = $(nav_element).children('.sticky-sidebar-nav-items');

  // necessary for css positioning
  var nav_height = nav_element.outerHeight();

  // page element where navigation will stop sticking to the side
  var last_element = $('.sticky-sidebar-stop');

  // 
  // POSITIONS
  // once a waypoint is triggered, the position tells the menu where the menu should be positioned
  // 

  // if the container isn't at the top of the page, this value adjusts for that difference
  var container_position = $(nav_container).parent().offset().top; 
  // where should the menu stick at the last element?
  var position_end = last_element.position().top + last_element.height() - nav_height - container_position;


  // 
  // OFFSETS
  // offsets tell the waypoints when they should be triggered.
  // 

  // all offsets are relative to the navigation menu, and will trigger waypoints
  // when the navigation menu hits various parts of the page.
  var offset_start = 0;     // very top of the container
  var offset_top = 0;       // top of the element

  // where the bottom of the element hits the browser viewport. We subtract by viewport height to get the bottom of the viewport, instead of top
  var offset_bottom = $.waypoints('viewportHeight') - nav_height; 

  // offset is relative to bottom of the window. This is calculated in scroll and refresh
  var offset_end = last_element.height() - container_position + nav_height;

  // 
  // COMPUTATION VALUES
  // these values determine where the waypoints will trigger, and where the navigation menu will stick
  // 

  // is the menu too tall for the window?
  // this could be a function, but as a variable it isn't evaluated as many times
  var is_too_tall = ($.waypoints('viewportHeight') < nav_element.outerHeight()) ? true : false; 
  if (!is_too_tall) {offset_end = last_element.height() - container_position + nav_height;}

  var direction, last_direction, last_scroll_top = 0, wp_state = 0;
  // wp_state is required to stop any interactions from firing below the end waypoint. These might fire in 
  // different orders on page load, depending on the viewport's scroll position

  function refresh() {
    // using nav_items because it will report the true height, since it never floats
    // need to calculate new heights on refresh
    nav_height = nav_items.height();

    // Positions
    container_position = $(nav_container).parent().offset().top; 
    position_end = last_element.position().top + last_element.height() - nav_height - container_position;

    offset_bottom = $.waypoints('viewportHeight') - nav_height; 
    offset_end = 0 - last_element.height() + $.waypoints('viewportHeight'); 

    is_too_tall = ($.waypoints('viewportHeight') < nav_items.outerHeight()) ? true : false; 
    if (!is_too_tall) {offset_end = 0 - last_element.height() + nav_height;}

    $.waypoints('refresh');
  }


  // 
  //  WAYPOINT Triggers
  // 

  //  WAYPOINT 1: Top of the Container; the top of the page / parent element
  var wp1 = $(nav_container).waypoint(function(dir) {
    state_container_top($(this), dir); 
  }, { offset: offset_start });

  //  WAYPOINT 2: Top of the Navigation Element; top of the menu, but not necessarily at top of page
  var wp2 = $(nav_element).waypoint(function(dir) {
    state_menu_top($(this), dir);
  }, { offset: function() { return offset_top } });
  // }, { offset: function() { console.log('new top offset: ' + offset_top); return offset_top } });

  //  WAYPOINT 3: Bottom of the Navigation Element;
  var wp3 = $(nav_element).waypoint(function(dir) {
    state_menu_bottom($(this), dir);
  }, { offset: function() { return offset_bottom } });

  //  WAYPOINT 4: Bottom of the Last Element; bottom of the page
  var wp4 = $(last_element).waypoint(function(dir) {
    state_container_bottom($(this), dir);
  }, { offset: function() { return offset_end } });


  // Resize + Scroll debouncer from: http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
  function scroll() {
    last_direction = direction;
    direction = (last_scroll_top < $(window).scrollTop()) ? 'down' : 'up';
    last_scroll_top = $(window).scrollTop();

    if (last_direction != direction) {
      refresh();
      new_position = nav_element.offset().top;
      absolute_position = new_position - container_position;

      if(is_too_tall) {
        $(nav_element).css({
          'position' : 'absolute',
          'top' : absolute_position
        });
      }
    }

  }

  function window_resize() {
    // on resize needs to call the scroll function for a refresh, or all the waypoints will be wrong
    refresh();
  }

  // when users focus back on the tab, they might have resized the browser.
  $(window).focus(function() {
    refresh();
  })






  // 
  //  STATE CONTROLLERS
  //  These are actions that the current state of the menu, and are separated from the triggers

  function state_container_top(_this, dir) {
    console.log('waypoint 1 : ' + dir);

    // if the viewport's at the very top, we set the position to static, so menu stays at the top of the container
    if (dir==='up') {

      nav_element.css({
        'position' : 'static'
      });

    } 
  }

  function state_menu_top(_this, dir) {
    console.log('waypoint 2 : ' + dir)

    // this happens when we're scrolling the viewport up, and we hit the top of the nav element
    if (dir==='up' && is_too_tall) {

      // note, don't set the waypoint element as sticky, as it'll cause problems
      $(_this).css({
        'position' : 'fixed',
        'top' : 0
      });
    } else if (!is_too_tall) {
      $(_this).css({
        'position' : 'fixed',
        'top' : 0,
        'bottom' : ''
      });
    }
  }

  function state_menu_bottom(_this, dir) {
    console.log('waypoint 3 : ' + dir)

    // if user's scrolling down and menu is too tall, set to fixed at the bottom
    if(dir==='down' && is_too_tall && wp_state !== 'bottom') {

      // note, don't set the waypoint element as sticky, as it'll cause problems
      $(_this).css({
        'position' : 'fixed',
        // hack / bug fix. If we place the menu at 0, Waypoints will think we're scrolling up.
        // this places the menu 1 pixel below the viewport, so when scrolling down, the
        // waypoint event will fire properly. Unfortunately this creates a 'jumping' effect when
        // scrolling downwards too quickly, right after page load
        'bottom' : -1, 
        'top' : ''
      });

    }


  }

  function state_container_bottom(_this, dir) {
    console.log('waypoint 4 : ' + dir)

    // if the viewport's at the very bottom, we set the position to static no matter the size of the menu
    if (dir==='down') {
      wp_state = 'bottom';
      nav_element.css({
        'position' : 'absolute',
        'top' : position_end,
        'bottom' : ''
      });
    } else {
      wp_state = 'going up';
    }

  }



});
















</script>

  <!-- quick note on the class naming scheme: 'post' just means this is a post on my blog, and 'left-nav' is the name of the article -->
  <!-- might realx the example here to make more legible for others... -->


  <!-- the container holds all the nav elements. I placed it on the right edge of the browser, but this container could be anywhere in the content -->
  <!-- the purpose of the container is to give space for the menu items to move around, and to properly place them somewhere on the page -->


  <div class="sticky-sidebar-container" id="left-nav--anchor-1">
    <div class="sticky-sidebar-toggle">toggle</div>

    <!-- the nav element itself has logic applied to it that will move it up and down the page -->
    <div class="sticky-sidebar-nav" >
      <nav>
        <ul class="sticky-sidebar-nav-items">
          <li><a href="#left-nav--anchor-1">1</a></li>
          <li><a href="#left-nav--anchor-2">2</a></li>
          <li><a href="#left-nav--anchor-3">3</a></li>
          <li><a href="#left-nav--anchor-4">4</a></li>
          <li><a href="#left-nav--anchor-5">5</a></li>
          <li><a href="#left-nav--anchor-6">6</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <div class="article--link-block">
    <a href="/app/posts/lab/left-nav/demo/sticky-sidebar-demo.html" class="link-external"><div class="btn-inline">Demo</div></a>
    <a href="/app/posts/lab/left-nav/demo/sticky-sidebar.zip" class="link-external"><div class="btn-inline">Download .zip</div></a>
  </div>
<p class="dropcap">Vertical sidebar menus are great. They allow for much more content than horizontal menus, as they can grow past the bottom of the page. For this reason, sites with long pages of documentation such as <a href="http://foundation.zurb.com/docs/">Zurb</a>, <a href="http://neat.bourbon.io/docs/">Bourbon</a>, <a href="http://reallygoodemails.com/">Really Good Emails</a> and <a href="http://getbootstrap.com/components/">Bootstrap</a> tend to employ the vertical navigation design pattern.</p>
<p>Keep in mind that I&#8217;m not talking about <strong>top-level primary site navigation</strong>. Instead, I&#8217;m specifically talking about page-level vertical sidebar menus.</p>
<h2 id="left-nav--anchor-2">A New Take on an Old Friend</h2>
<figure>
<p><img src="/app/posts/lab/left-nav/bootstrap3.png" class="img-caption" alt="" /> <br />
<figcaption>the sidebar from Bootstrap doesn&#8217;t always fit</figcaption></p>
<p></figure> Vertical navigation has existed pretty much since the birth of the internet. Though recently, a few design pattern variations have emerged, including the sticky sidebar (Bootstrap) and the scrolling container (Really Good Emails). The scrolling container is self-explanatory: users scroll the menu independently of the main content, and the sidebar is not affected by the scroll position of the main page. In contrast, as users scroll down the page on Bootstrap, the menu sticks to the side as a <em>fixed position</em> css element, and reacts to the user&#8217;s scroll position. This latter method creates a stronger  &#8220;bond&#8221; between the sidebar and the content, as clicking on sidebar items will scroll to different parts of the page.</p>
<p>In addition to the sticky nav, Bootstrap does something else that&#8217;s very clever: it detects the users&#8217; scroll position, and expands different parts of the sidebar. However, as I&#8217;m on a small screen, expanding submenus ends up pushing the rest of the menu outside my browser, pushing some items below the viewport.</p>
<h2 id="left-nav--anchor-3">Scaling Upwards</h2>
<figure class="figure-wide">
<p><img src="/app/posts/lab/left-nav/up2.jpg" alt="" /></p>
</figure>
<p>A vertical nav falls apart if there are too many links on the menu. If it&#8217;s too tall, links will appear below the fold. And if it&#8217;s sticky, users will never see those f links.</p>
<p>In this case, one solution is to allow the viewport to keep scrolling continue scrolling until the bottom of the menu is visible, and stick the menu to the viewport as the browser continues scrolling down. Likewise, when scrolling up, let the menu scroll with the content until the top of the menu is visible before making the menu stick. This method will let users to quickly access both the top and the bottom of the navigation menu.</p>
<p>The one down-side to this implementation is the user won&#8217;t always see current active menu item, since if the menu is very tall, the active link might either be above or below the viewport.</p>
<p>I&#8217;ve seen a few implementations of this idea in the wild, but can&#8217;t remember where. I&#8217;ll update this post with examples when I find any. Or you could spare me the trouble and <a href="mailto:janeazy@gmail.com">send me some.</a></p>
<h2 id="left-nav--anchor-4">Implementation</h2>
<p>There are a few scenarios I used when I built the demo:</p>
<ol>
	<li>Is the sidebar always fairly short?</li>
	<li>Is the sidebar most likely going to be very tall?</li>
	<li>Could the sidebar be either short or tall?</li>
</ol>
<p>1) If the sidebar is usually short, it will most likely never be larger than the browser viewport. In this scenario, the sidebar could easily remain a fixed-position element.</p>
<p>2) If the sidebar is always taller than the viewport, we can let the viewport scroll to the bottom or the top edge of sidebar menu before applying a sticky effect, This way, every part of the sidebar will be easier to access.</p>
<p>3) This case is a combination of the first two cases. The menu behavior needs to respond to the dynamic size of the navigation element. It adds a small amount of complication, but still adheres to items 1) and 2). This is the scenario that&#8217;s covered by this demo page.</p>
<p>To approach scenario 3, I used <a href="http://imakewebthings.com/jquery-waypoints/">JQuery Waypoints</a> to track the positions of menu objects relative to both the viewport and other objects. A much simpler way to implement a sticky menu is using <a href="https://github.com/Prinzhorn/skrollr">Skrollr</a>, but Skrollr lacks the dynamic properties of Waypoints. It would be a good technology for scenario 1, if the menu height and the waypoints weren&#8217;t dynamic.</p>
<p>The implementation using Waypoints is fairly straightforward. On every element change or viewport interaction (like the size of the menu changing, the page is scrolled, or the browser resized) I update the relative waypoint offsets, and the positions where the menu should stick. I&#8217;m using Waypoints to track for the scroll condition, and set the appropriate values when a certain scroll condition has been met.</p>
<p>I also make sure to implement deduplication and other barriers to prevent the system from calculating more than it needs to, to keep the scrolling mechanism as smooth as possible.</p>
<h2 id="left-nav--anchor-5">Bugs and Issues</h2>
<p>After several code rewrites and iterations, most bugs have been squashed. Though there are still a few bugs:</p>
<p>1) The way I&#8217;m implementing the debouncer to reduce the number of calculations doesn&#8217;t always seem to catch user behavior, like scrolling or resizing.</p>
<p>2) I&#8217;m not sure how to account for zooming in the browser, since I don&#8217;t know how to capture browser behavior.</p>
<p>3) I&#8217;m accounting for page focus and page resize, but I&#8217;m not accounting for repositioning the menu while the browser window is being resized. At the end of window resize, the menu position will be wrong until the viewport hits another waypoint.</p>
<p>4) Finally, this method will not work properly on mobile and tablet devices, as scrolling won&#8217;t fire until the scrolling stops. <a href="https://github.com/janpaepke/ScrollMagic">ScrollMagic</a> seems to have bypassed this issue by using iScroll, but at this point it might make more sense to use an independent sidebar or an <a href="http://www.lukew.com/ff/entry.asp?1514s">off-canvas</a> pattern.</p>
<p>If you have found issues or have any ideas to how to speed up, improve, or fix anything, please <a href="mailto:janeazy@gmail.com">send me a note!</a></p>
<p class="sticky-sidebar-stop">This is the last section that the sidebar will follow, as denoted by the class <code>.sticky-sidebar-stop</code>.</p>
<h2 id="left-nav--anchor-6">Lastly</h2>
<p>Sometimes a little more effort is required to add subtle pieces of details, something most might not even recognize, but the extra effort definitely can make a product or functionality shine.</p>
<p>All the code for this repository is free to use. It is experimental and a proof of concept, and is (only somewhat) optimized or checked for bugs. If you&#8217;d like to add this functionality to your site, you&#8217;re more than welcome.</p>
<p>In the future I&#8217;ll create a separate Github project with a guide on how to use the code.</p>
  <a href="/app/posts/lab/left-nav/demo/sticky-sidebar-demo.html" class="link-external"><div class="btn-inline">Demo</div></a>
  <a href="/app/posts/lab/left-nav/demo/sticky-sidebar.zip" class="link-external"><div class="btn-inline">Download .zip</div></a>


        <div class="clear"></div>

        <div class="article--comments">

           
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'janzheng'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->

           

        </div>
      </div>


    </div>

    <!-- end article body -->

    <div class="clear"></div>
      


  </div>
</div>
        </div>
        <div class="legal">
          <p id="fine-print">
            &copy; 2014. Built on <a href="https://github.com/janzheng/janzheng.github.com">Github</a> &amp; <a href="https://github.com/mojombo/jekyll">Jekyll</a>.
          </p>
          
        </div> 
      </div>


    </div>
    <!-- End container -->

  </div>
    <!-- End container-shell -->















<!-- 
  <script src="//ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.0.6-development-only.js"></script>
 -->
  <!-- Google Prettify - https://code.google.com/p/google-code-prettify/wiki/GettingStarted -->
  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&lang=html&lang=js&skin=desert"></script>


  <!-- <script src="/assets/js/plugins.js"></script> -->
  <!-- 
  <script src="/app/js/jquery.flexslider-min.js"></script>
  <script src="/app/js/slimbox2.js"></script>
 -->


  <script src="/app/js/waypoints.min.js"></script>
  <script src="/app/js/skrollr.min.js"></script>
  <script src="/app/js/script.js"></script>

  <!-- 
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
  google.load("feeds", "1") //Load Google Ajax Feed API (version 1)
  </script>

  <script type="text/javascript" src="http://funkability.tumblr.com/api/read/json"></script>

  <script type="text/javascript">
      // The variable "tumblr_api_read" is now set.
      // console.log('tumblr json: ' + JSON.stringify(tumblr_api_read['tumblelog'] ));
      // console.log('tumblr json: ' + JSON.stringify(tumblr_api_read["posts"][0]['url'] ));

      console.log('<a href="' + tumblr_api_read['posts'][0]['url'] + '">Most recent Tumblr post</a>');
  </script>
   -->

  <!-- new google analytics beta -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39843414-1', 'janzheng.com');
    ga('send', 'pageview');

  </script>

</body>
</html>
